<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS函数防抖和函数节流 | 前端菜鸟的进阶之路</title>
    <meta name="description" content="编程不易，砥砺前行">
    <link rel="icon" href="/web_blog/favicon.png">
    
    <link rel="preload" href="/web_blog/assets/css/0.styles.7a36dbfb.css" as="style"><link rel="preload" href="/web_blog/assets/js/app.91c2830f.js" as="script"><link rel="preload" href="/web_blog/assets/js/2.eab7b1a3.js" as="script"><link rel="preload" href="/web_blog/assets/js/12.84690c1b.js" as="script"><link rel="prefetch" href="/web_blog/assets/js/10.b7c51a89.js"><link rel="prefetch" href="/web_blog/assets/js/11.810ef8d7.js"><link rel="prefetch" href="/web_blog/assets/js/13.014fa390.js"><link rel="prefetch" href="/web_blog/assets/js/14.b6a094b6.js"><link rel="prefetch" href="/web_blog/assets/js/15.73574f0c.js"><link rel="prefetch" href="/web_blog/assets/js/16.6d25e66c.js"><link rel="prefetch" href="/web_blog/assets/js/17.6da21962.js"><link rel="prefetch" href="/web_blog/assets/js/18.e4bbeb45.js"><link rel="prefetch" href="/web_blog/assets/js/19.9d29afb6.js"><link rel="prefetch" href="/web_blog/assets/js/20.6e359f8f.js"><link rel="prefetch" href="/web_blog/assets/js/21.b6a44bf0.js"><link rel="prefetch" href="/web_blog/assets/js/22.72395c6d.js"><link rel="prefetch" href="/web_blog/assets/js/23.3cf07315.js"><link rel="prefetch" href="/web_blog/assets/js/24.ce3af049.js"><link rel="prefetch" href="/web_blog/assets/js/25.be8464ab.js"><link rel="prefetch" href="/web_blog/assets/js/26.818e6723.js"><link rel="prefetch" href="/web_blog/assets/js/27.f604fd0e.js"><link rel="prefetch" href="/web_blog/assets/js/28.ea43a8e0.js"><link rel="prefetch" href="/web_blog/assets/js/29.6cbe154c.js"><link rel="prefetch" href="/web_blog/assets/js/3.79e8f6ea.js"><link rel="prefetch" href="/web_blog/assets/js/30.3cce892a.js"><link rel="prefetch" href="/web_blog/assets/js/31.eb02c772.js"><link rel="prefetch" href="/web_blog/assets/js/32.b6fc1c31.js"><link rel="prefetch" href="/web_blog/assets/js/33.ec19d2a3.js"><link rel="prefetch" href="/web_blog/assets/js/34.e7982556.js"><link rel="prefetch" href="/web_blog/assets/js/35.6a41dc93.js"><link rel="prefetch" href="/web_blog/assets/js/36.de0c92ff.js"><link rel="prefetch" href="/web_blog/assets/js/37.2a90e558.js"><link rel="prefetch" href="/web_blog/assets/js/38.9e70b18a.js"><link rel="prefetch" href="/web_blog/assets/js/39.89f71dfd.js"><link rel="prefetch" href="/web_blog/assets/js/4.25ef38aa.js"><link rel="prefetch" href="/web_blog/assets/js/40.e174e7e4.js"><link rel="prefetch" href="/web_blog/assets/js/41.db4885dc.js"><link rel="prefetch" href="/web_blog/assets/js/42.3319ecbf.js"><link rel="prefetch" href="/web_blog/assets/js/43.cc6ba545.js"><link rel="prefetch" href="/web_blog/assets/js/44.0b03addc.js"><link rel="prefetch" href="/web_blog/assets/js/45.7759f79c.js"><link rel="prefetch" href="/web_blog/assets/js/46.b64c0a3b.js"><link rel="prefetch" href="/web_blog/assets/js/47.ec610bc0.js"><link rel="prefetch" href="/web_blog/assets/js/48.1d911c4b.js"><link rel="prefetch" href="/web_blog/assets/js/49.6e433bb5.js"><link rel="prefetch" href="/web_blog/assets/js/5.746bcae1.js"><link rel="prefetch" href="/web_blog/assets/js/50.cae10208.js"><link rel="prefetch" href="/web_blog/assets/js/51.172c43fc.js"><link rel="prefetch" href="/web_blog/assets/js/52.2d0abb1b.js"><link rel="prefetch" href="/web_blog/assets/js/53.6601a9d1.js"><link rel="prefetch" href="/web_blog/assets/js/54.4db27d09.js"><link rel="prefetch" href="/web_blog/assets/js/55.b676ed30.js"><link rel="prefetch" href="/web_blog/assets/js/56.2f94d7d3.js"><link rel="prefetch" href="/web_blog/assets/js/57.739d9718.js"><link rel="prefetch" href="/web_blog/assets/js/58.14252a7f.js"><link rel="prefetch" href="/web_blog/assets/js/59.9c05cedd.js"><link rel="prefetch" href="/web_blog/assets/js/6.d8f4b14d.js"><link rel="prefetch" href="/web_blog/assets/js/60.10980736.js"><link rel="prefetch" href="/web_blog/assets/js/61.6dbb0bf2.js"><link rel="prefetch" href="/web_blog/assets/js/62.2b9de86f.js"><link rel="prefetch" href="/web_blog/assets/js/63.3c461591.js"><link rel="prefetch" href="/web_blog/assets/js/64.cb9c7ff9.js"><link rel="prefetch" href="/web_blog/assets/js/65.3027aedc.js"><link rel="prefetch" href="/web_blog/assets/js/66.8fa94b0b.js"><link rel="prefetch" href="/web_blog/assets/js/67.1196783a.js"><link rel="prefetch" href="/web_blog/assets/js/68.9e3adf92.js"><link rel="prefetch" href="/web_blog/assets/js/69.30b26df4.js"><link rel="prefetch" href="/web_blog/assets/js/7.bef0e458.js"><link rel="prefetch" href="/web_blog/assets/js/70.ea55f415.js"><link rel="prefetch" href="/web_blog/assets/js/71.99deb135.js"><link rel="prefetch" href="/web_blog/assets/js/72.b411f500.js"><link rel="prefetch" href="/web_blog/assets/js/73.ae212902.js"><link rel="prefetch" href="/web_blog/assets/js/74.c42cb468.js"><link rel="prefetch" href="/web_blog/assets/js/75.4841d167.js"><link rel="prefetch" href="/web_blog/assets/js/76.8152f076.js"><link rel="prefetch" href="/web_blog/assets/js/77.5650be83.js"><link rel="prefetch" href="/web_blog/assets/js/78.13e5f2de.js"><link rel="prefetch" href="/web_blog/assets/js/79.981af0a6.js"><link rel="prefetch" href="/web_blog/assets/js/8.e30cf33c.js"><link rel="prefetch" href="/web_blog/assets/js/80.79c69641.js"><link rel="prefetch" href="/web_blog/assets/js/81.acfa7b78.js"><link rel="prefetch" href="/web_blog/assets/js/82.4422108d.js"><link rel="prefetch" href="/web_blog/assets/js/83.65d9e4db.js"><link rel="prefetch" href="/web_blog/assets/js/84.b8c62118.js"><link rel="prefetch" href="/web_blog/assets/js/9.ebc19581.js">
    <link rel="stylesheet" href="/web_blog/assets/css/0.styles.7a36dbfb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/web_blog/" class="home-link router-link-active"><!----> <span class="site-name">前端菜鸟的进阶之路</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/web_blog/" class="nav-link">首页</a></div><div class="nav-item"><a href="/web_blog/blog/" class="nav-link">技术·博文</a></div><div class="nav-item"><a href="/web_blog/question/" class="nav-link router-link-active">经典·面试</a></div> <a href="https://github.com/dancingTx/web_blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/web_blog/" class="nav-link">首页</a></div><div class="nav-item"><a href="/web_blog/blog/" class="nav-link">技术·博文</a></div><div class="nav-item"><a href="/web_blog/question/" class="nav-link router-link-active">经典·面试</a></div> <a href="https://github.com/dancingTx/web_blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>编程练习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>解释问题-JavaScript篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>解释问题-Vue篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>解释问题-网络篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>原理实现</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/web_blog/question/面试相关/原理实现/实现一个instanceOf.html" class="sidebar-link">实现一个instanceOf</a></li><li><a href="/web_blog/question/面试相关/原理实现/深浅拷贝的实现.html" class="sidebar-link">深浅拷贝的实现</a></li><li><a href="/web_blog/question/面试相关/原理实现/实现一个简易Promise.html" class="sidebar-link">实现一个简易Promise</a></li><li><a href="/web_blog/question/面试相关/原理实现/实现call，apply，bind.html" class="sidebar-link">实现call、apply、bind</a></li><li><a href="/web_blog/question/面试相关/原理实现/实现new.html" class="sidebar-link">实现new</a></li><li><a href="/web_blog/question/面试相关/原理实现/理解与实现函数节流与函数防抖.html" class="active sidebar-link">JS函数防抖和函数节流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web_blog/question/面试相关/原理实现/理解与实现函数节流与函数防抖.html#js函数防抖和函数节流" class="sidebar-link">JS函数防抖和函数节流</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>LeetCode</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="js函数防抖和函数节流"><a href="#js函数防抖和函数节流" aria-hidden="true" class="header-anchor">#</a> JS函数防抖和函数节流</h2> <p><strong>问题引入</strong></p> <p><strong>问题1:</strong> 如果实现了dom拖拽功能，但是在绑定拖拽事件的时候发现每当元素稍微移动一点便触发了大量的回调函数，导致浏览器直接卡死，这个时候怎么办？</p> <p><img src="/web_blog/assets/img/timer.a34beb37.png" alt=""></p> <p><strong>问题2:</strong> 如果按钮绑定了表单提交的<code>POST</code>请求，但是当用户在网络不佳的时候，多次点击按钮导致表单重复提交，如何防止多次提交的发生？</p> <blockquote><p>针对诸如问题1的场景，可以采用<strong>函数节流</strong>，针对诸如问题2的场景，可以采用<strong>函数防抖</strong>。</p> <p>总的来说，两个方法都是通过<strong>时间轴上控制函数的执行次数</strong>。</p></blockquote> <p><strong>函数节流（throttle）</strong></p> <ul><li><p>概念：<code>规定一个单位时间，在该单位时间里，只允许出现一次触发事件的回调函数执行，如果在同一单位时间内某事件被触发多次，则只有一次生效。</code></p></li> <li><p>生活中的实例： <code>我们知道目前的一种说法是当 1 秒内连续播放 24 张以上的图片时，在人眼的视觉中就会形成一个连贯的动画，所以在电影的播放（以前是，现在不知道）中基本是以每秒 24 张的速度播放的，为什么不是 100 张或更多？是因为 24 张就可以满足人类视觉需求的时候，100 张就会造成不必要的资源浪费</code></p></li></ul> <p><strong>函数防抖（debounce）</strong></p> <ul><li>概念：<code>在事件被触发n秒后再执行回调，如果在这n秒内又被触发，则重新计时。</code></li> <li>生活中的实例：<code>如果有人进电梯（触发事件），那电梯将在10秒钟后出发（执行事件监听器），这时如果又有人进电梯了（在10秒内再次触发该事件），我们又得等10秒再出发（重新计时）。</code></li></ul> <p><strong>分析图</strong></p> <p>假设，我们观察的总时间为10秒钟，规定1秒钟作为一次事件的最小间隔时间。</p> <p>如果触发事件的频率为<code>0.5s/次</code>，那么</p> <p>函数防抖如图</p> <p><img src="data:image/png;base64,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lM5DDz0U9WgSIECAAAECBAgQIECAwG4WOOmkk3bz9u29EQGf4GkkKMskQIAAAQIECBAgQIAAAQIECOQEmvoEz+uvvx5+8pOfhAceeCC88MIL4eSTTw7nnXdeOO2003L700+AAAECBAgQIECAAAECBD5wgb///e/hL3/5Szj11FPDBRdc8L7517u2vfDCC8OJJ574vtdpEFhGoJkCz8svvxwuueSS8K9//Wv//u6///5w3333hVtvvTWcddZZ+/sdECBAgAABAgQIECBAgACBGgJvvvlmuPfee8Ntt90W/ve//4V33nnnfQWeV155JVx22WXJte2Pf/zjcMstt7i2rRHaSOZs5hat733ve/0vQFfRvOuuu8IvfvGL8PWvfz289tprfeHnxRdfHEkktkGAAAECBAgQIECAAAECLQr88Ic/DJ///Of7Qk1X3FnvccMNN6x7bfvqq6+6tl0PTN/CAk0UeJ599tnw+9//Phx00EHh2muvDeecc044/vjjw5VXXtnfpvXGG2/0t26tt+vul+Ttt99e75Q+AgQIECBAgAABAgQIECCwbQLdLVnd3Sff+MY3wrnnnpv83O7a9s9//vO617ann356cG2bkOlYQqCJAs/vfve7vkjzmc98Jpxwwgn7t7eyshK++MUv9u1f//rX+/tns1m4+uqr+1+o7tat7jt6vvCFL4S77767/4jc/hc6IECAAAECBAgQIECAAAEC2yTwuc99LnTXpt2HESaTSfJTN7q2/fKXv9y/fqNr289+9rOubRNVHXOBJr6D5+mnn+7X+6lPfWq+7v3Pn/zkJ/vj//73v/v79u7dGx588MFw6KGHhjPPPDN0t289/vjj4aabbgrd/Y6XXnrp/tc6IECAAAECBAgQIECAAAEC2yHQfY3IRo+Nrm0//elP90M3urZ97rnnwpNPPunadiPkXXyuiU/wPPPMM31E61VADzvssP5c91G2rpDT/TJ0xZ3u8f3vf7//9/Of/zx897vf7fu6v8KVuxeyf4H/CBAgQIAAAQIECBAgQIDAARDY6Nr2ox/9aD/jRte2P/jBD1zbHoBcxvIjmyjwdF+k3D0+/OEPJ+579rz3IaTudYcffniY991zzz19sacr6HzpS1/qv8jqj3/8Y/jQh5rYdrJXHQQIECBAgAABAgQIECDQrsBG17bD613Xtu1mXHPl71VH3l1F9/01W30cqLEf+9jH+iU9//zzIZ6j+wKr7tF9H89HPvKR0P1JuiuuuCJcf/31obu/sfvXVUK77+I5//zz+y9o7ge8+1/884bnHBMgQIAAAQIECBAgQIAAgbnA8PpxeDw/P3x+6623+mZ3jTp/7UbXtvNbs7Z6bTucO3c8X0fu/Eb9xm6k8/5ztaySAs96t0G9f6nrt7oNHKixxx13XD9pd79hPMc//vGP/twRRxwRjjzyyP74a1/7WrjgggtC92mdv/71r+H+++8Pf/jDH/p/F154Ybjmmmv6T/GUrHl9Bb0ECBAgQIAAAQIECBAgMFaB+fXoIteS80/kdB9EmI/b6Nr2kUce6dk2urbtrn/Xu7ZdxHuRNed+jrE5mbS/plUT9yqdccYZvdo///nP/hM6Q8J5gaf7k3LdYzqdhv/85z/9n6b7yle+Em688cbQ/am66667ri/q/OY3vwn//ve/hz/CMQECBAgQIECAAAECBAgQOOACG13b/u1vf+vn3+ja9pe//KVr2wOeUrsTNFHgOfvss8Pxxx8fulu0br/99v3ajz32WPjpT3/at7/5zW/2z48++mj46le/GrriTlfs6R7dd+6cd9554ZBDDunbL7zwQv/sPwIECBAgQIAAAQIECBAg8EEJdNe2n/jEJ9a9tv3Rj37UL8O17QeVxvjmSW7R2qlbvPzyy8N3vvOdcPfdd4c//elP4Zhjjgndp3fefvvt0N12ddppp/VLP+WUU/pi0BNPPBG+9a1v9X8mvfuS5e5TOy+99FJf5Ole40GAAAECBAgQIECAAAECBD5ogW9/+9vhqquu2tK17euvvx4efvhh17YfdGiNzNfEJ3g6y3PPPTfccccd4dhjjw1PPvlk6D6+dvDBB/ef1um+U2f+6O5zvPXWW/svU37qqadC92fRf/azn4Wu4HPiiSeGm2++OXz84x+fv9wzAQIECBAgQIAAAQIECBD4wAS6T/Gsd2170UUX9d8XO1/Iete2v/rVr1zbzoE8JwLNfIKnW3n3l7B++9vfhmeffTa8+OKL4YQTTugrl/GfPV9dXQ133XVX/5qnn346rK2thaOOOiocffTRCYAOAgQIECBAgAABAgQIECCw3QLXXntt6P6t91jv2ja+ru3Gxde23V0p3deXuLZdT1VfUwWeeVxdsab7t9nj8MMPD90/DwIECBAgQIAAAQIECBAgsNMElr22LfkLTTtt79az/QJNFni2n+G9n3jSSSe913BEgAABAgQIECBAgAABAgQIEGhAoJnv4DnQlnv37j3QU/j5BAgQIECAAAECBAgQINCowMUXX9zoyi17twj4BM+7SXe/rMv8wpZ8NK7W2H379vX3cG7lzV1rzSXz2u/iSZc41xorX/nmBGq9J0vm9X7OpZn2lzjXGivfNMdcT62MSuaVby7NtL/EudZY+aY55npqZVQyb0m+OQf9BGoK+ARPTX1zEyBAgAABAgQIECBAgAABAgS2QUCBZxsQ/QgCBAgQIECAAAECBAgQIECAQE0BBZ6a+uYmQIAAAQIECBAgQIAAAQIECGyDgALPNiD6EQQIECBAgAABAgQIECBAgACBmgIr0+l0bb6A7guqtvqYTCZhq+Nrjd3qXrtxtdZcMq/9Li5Q4lxr7OK7S19Za80l86a7WLynZN5aYxffXfrKWmsumTfdxeI9JfPWGrv47tJX1lpzybzpLhbvKZm31tjFd5e+staaS+ZNd7F4T8m8tcYuvrv0lbXWXDJvuovFe0rmrTV28d2lr6y15pJ5010s3lMyb62xi+8ufWWtNZfMm+5i8Z6SeWuNXXx36Strrblk3m4XSYFndXU13d0CPSXfXl5rbMm3ptdac8m89rvAG/ndl5Q41xorX/nmBGq9J0vm9X7OpZn2lzjXGivfNMdcT62MSuaVby7NtL/EudZY+aY55npqZVQyr3xzaab9Jc61xso3zTHXUyujknm7fN2ilUtUPwECBAgQIECAAAECBAgQIECgEQEFnkaCskwCBAgQIECAAAECBAgQIECAQE5AgScno58AAQIECBAgQIAAAQIECBAg0IiAAk8jQVkmAQIECBAgQIAAAQIECBAgQCAnoMCTk9FPgAABAgQIECBAgAABAgQIEGhEQIGnkaAskwABAgQIECBAgAABAgQIECCQE1DgycnoJ0CAAAECBAgQIECAAAECBAg0IqDA00hQlkmAAAECBAgQIECAAAECBAgQyAko8ORk9BMgQIAAAQIECBAgQIAAAQIEGhFQ4GkkKMskQIAAAQIECBAgQIAAAQIECOQEFHhyMvoJECBAgAABAgQIECBAgAABAo0IKPA0EpRlEiBAgAABAgQIECBAgAABAgRyAgo8ORn9BAgQIECAAAECBAgQIECAAIFGBFam0+nafK2z2SxMJpN5c/TP9jvuiOUr3zEJeD+PKc10L/JNTcbUI98xpZnuRb6pyZh65DumNNO9yDc1GVPPbsx3TxzgVgs8JXjGxink26zyNvEZVrFIvs0qbxOfYRWL5Nus8jbxGVaxSL7NKm8Tn2EVi+TbrPI28RlWsUi+zSpvE59hFYvk26zyNvGZ3WjlFq34XaBNgAABAgQIECBAgAABAgQIEGhMQIGnscAslwABAgQIECBAgAABAgQIECAQCyjwxCLaBAgQIECAAAECBAgQIECAAIHGBBR4GgvMcgkQIECAAAECBAgQIECAAAECsYACTyyiTYAAAQIECBAgQIAAAQIECBBoTECBp7HALJcAAQIECBAgQIAAAQIECBAgEAso8MQi2gQIECBAgAABAgQIECBAgACBxgQUeBoLzHIJECBAgAABAgQIECBAgAABArGAAk8sok2AAAECBAgQIECAAAECBAgQaExAgaexwCyXAAECBAgQIECAAAECBAgQIBALKPDEItoECBAgQIAAAQIECBAgQIAAgcYEFHgaC8xyCRAgQIAAAQIECBAgQIAAAQKxgAJPLKJNgAABAgQIECBAgAABAgQIEGhMYGU6na7N1zybzcJkMpk3R/9sv+OOWL7yHZOA9/OY0kz3It/UZEw98h1Tmule5JuajKlHvmNKM92LfFOTMfXsxnz3xAFutcBTgmdsnEK+zSpvE59hFYvk26zyNvEZVrFIvs0qbxOfYRWL5Nus8jbxGVaxSL7NKm8Tn2EVi+TbrPI28RlWsUi+zSpvE5/ZjVZu0YrfBdoECBAgQIAAAQIECBAgQIAAgcYEFHgaC8xyCRAgQIAAAQIECBAgQIAAAQKxgAJPLKJNgAABAgQIECBAgAABAgQIEGhMQIGnscAslwABAgQIECBAgAABAgQIECAQCyjwxCLaBAgQIECAAAECBAgQIECAAIHGBBR4GgvMcgkQIECAAAECBAgQIECAAAECsYACTyyiTYAAAQIECBAgQIAAAQIECBBoTECBp7HALJcAAQIECBAgQIAAAQIECBAgEAso8MQi2gQIECBAgAABAgQIECBAgACBxgQUeBoLzHIJECBAgAABAgQIECBAgAABArGAAk8sok2AAAECBAgQIECAAAECBAgQaExAgaexwCyXAAECBAgQIECAAAECBAgQIBALKPDEItoECBAgQIAAAQIECBAgQIAAgcYEVqbT6dp8zbPZLEwmk3lz9M/2O+6I5SvfMQl4P48pzXQv8k1NxtQj3zGlme5FvqnJmHrkO6Y0073INzUZU89uzHdPHOBWCzwleMbGKeTbrPI28RlWsUi+zSpvE59hFYvk26zyNvEZVrFIvs0qbxOfYRWL5Nus8jbxGVaxSL7NKm8Tn2EVi+TbrPI28ZndaOUWrfhdoE2AAAECBAgQIECAAAECBAgQaExAgaexwCyXAAECBAgQIECAAAECBAgQIBALKPDEItoECBAgQIAAAQIECBAgQIAAgcYEFHgaC8xyCRAgQIAAAQIECBAgQIAAAQKxgAJPLKJNgAABAgQIECBAgAABAgQIEGhMQIGnscAslwABAgQIECBAgAABAgQIECAQCyjwxCLaBAgQIECAAAECBAgQIECAAIHGBBR4GgvMcgkQIECAAAECBAgQIECAAAECsYACTyyiTYAAAQIECBAgQIAAAQIECBBoTECBp7HALJcAAQIECBAgQIAAAQIECBAgEAso8MQi2gQIECBAgAABAgQIECBAgACBxgQUeBoLzHIJECBAgAABAgQIECBAgAABArGAAk8sok2AAAECBAgQIECAAAECBAgQaExgZTqdrs3XPJvN5odLP08mk7DV8bXGLr3JwYBaay6Zd7D8pQ9L5q01dulNDgbUWnPJvIPlL31YMm+tsUtvcjCg1ppL5h0sf+nDknlrjV16k4MBtdZcMu9g+Usflsxba+zSmxwMqLXmknkHy1/6sGTeWmOX3uRgQK01l8w7WP7ShyXz1hq79CYHA2qtuWTewfKXPiyZt9bYpTc5GFBrzSXzDpa/9GHJvLXGLr3JwYBaay6Zd7D8pQ9L5q01tttkUuBZXV1devPdgK64021kK49aY/ft2xfsd7HEamVUMq98F8u2e1WJc62x8pVvTqDWe7JkXu/nXJppf4lzrbHyTXPM9dTKqGRe+ebSTPtLnGuNlW+aY66nVkYl88o3l2baX+Jca+xuzNctWul7Vw8BAgQIECBAgAABAgQIECBAoCkBBZ6m4rJYAgQIECBAgAABAgQIECBAgEAqoMCTmughQIAAAQIECBAgQIAAAQIECDQloMDTVFwWS4AAAQIECBAgQIAAAQIECBBIBRR4UhM9BAgQIECAAAECBAgQIECAAIGmBBR4morLYgkQIECAAAECBAgQIECAAAECqYACT2qihwABAgQIECBAgAABAgQIECDQlIACT1NxWSwBAgQIECBAgAABAgQIECBAIBVQ4ElN9BAgQIAAAQIECBAgQIAAAQIEmhJQ4GkqLoslQIAAAQIECBAgQIAAAQIECKQCCjypiR4CBAgQIECAAAECBAgQIECAQFMCCjxNxWWxBAgQIECAAAECBAgQIECAAIFUQIEnNdFDgAABAgQIECBAgAABAgQIEGhKYGU6na7NVzybzcJkMpk3R/9sv+OOWL7yHZOA9/OY0kz3It/UZEw98h1Tmule5JuajKlHvmNKM92LfFOTMfXsxnz3xAFutcBTgmdsnEK+zSpvE59hFYvk26zyNvEZVrFIvs0qbxOfYRWL5Nus8jbxGVaxSL7NKm8Tn2EVi+TbrPI28RlWsUi+zSpvE5/ZjVZu0YrfBdoECBAgQIAAAQIECBAgQIAAgcYEFHgaC8xyCRAgQIAAAQIECBAgQIAAAQKxgAJPLKJNgAABAgQIECBAgAABAgQIEGhMQIGnscAslwABAgQIECBAgAABAgQIECAQCyjwxCLaBAgQIECAAAECBAgQIECAAIHGBBR4GgvMcgkQIECAAAECBAgQIECAAAECsYACTyyiTYAAAQIECBAgQIAAAQIECBBoTECBp7HALJcAAQIECBAgQIAAAQIECBAgEAso8MQi2gQIECBAgAABAgQIECBAgACBxgT+D58oX5e6HXLHAAAAAElFTkSuQmCC" alt=""></p> <p>由于始终无法等待一秒钟就被再次触发，因此最终没有一次事件成功。</p> <p>函数节流如图</p> <p><img src="/web_blog/assets/img/timer3.e0ee03c0.png" alt=""></p> <p>因为控制了最多一秒一次，频率为<code>0.5s/次</code>,所以没过一秒钟就有一次事件作废。最终控制成<code>1s/次</code></p> <p>如果触发事件的频率是<code>2s/次</code>,那么</p> <p>函数防抖如图</p> <p><img src="/web_blog/assets/img/timer4.97a8d46a.png" alt=""></p> <p>因为<code>2s/次</code>已经超过规定的最小时间，所以每计时两秒便触发一次。</p> <p>函数节流如图</p> <p><img src="/web_blog/assets/img/timer5.3e2473a5.png" alt=""></p> <p>同样，<code>2s/次</code>超过了最小规定时间，因此每一次触发都生效。</p> <p><strong>应用场景</strong></p> <p>对于函数防抖，有以下几种应用场景：</p> <ul><li>给按钮加函数防抖防止表单多次重复提交</li> <li>对于输入框连续输入进行<code>AJAX</code>请求时，用函数防抖可以有效减少请求次数</li> <li>判断<code>scroll</code>是否滑到底部，<code>滚动事件</code>+<code>函数防抖</code></li></ul> <blockquote><p>总的来说，防抖适合多次事件一次响应的情况</p></blockquote> <p>对于函数节流，有以下几种应用场景：</p> <ul><li>游戏中的刷新率</li> <li><code>DOM</code>元素拖拽</li> <li><code>Canvas</code>画笔功能</li></ul> <blockquote><p>总的来说，适合大量事件按时间做平均分配触发</p></blockquote> <p><strong>源码示例</strong></p> <p>函数防抖：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span>wait<span class="token operator">=</span><span class="token number">300</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>wait<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>之所以返回一个函数，是因为防抖本身更像是一个函数修饰，所以就做了一次函数柯里化。里面也用到了闭包，闭包的变量是<code>timer</code>。</p> <p>函数节流：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span>wait<span class="token operator">=</span><span class="token number">300</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> last_time <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>now<span class="token operator">-</span>last_time<span class="token operator">&gt;</span>wait<span class="token punctuation">)</span><span class="token punctuation">{</span>
            last_time <span class="token operator">=</span> now
            <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>小结</strong></p> <p>函数防抖和函数节流是<strong>在时间轴上控制函数的执行次数</strong>。防抖可以类比为<code>电梯不断上乘客</code>,节流可以看做<code>幻灯片限制频率播放电影</code>。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">9/25/2019, 9:54:29 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/web_blog/question/面试相关/原理实现/实现new.html" class="prev">实现new</a></span> <span class="next"><a href="/web_blog/question/leetcode/20.有效的括号.html">有效的括号（简单）</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/web_blog/assets/js/app.91c2830f.js" defer></script><script src="/web_blog/assets/js/2.eab7b1a3.js" defer></script><script src="/web_blog/assets/js/12.84690c1b.js" defer></script>
  </body>
</html>
